/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/flowbite-datepicker@1.3.0/js/events/inputFieldListeners.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{isInRange}from"../lib/utils.js";import{addDays,addMonths,addYears,startOfYearPeriod}from"../lib/date.js";import{goToPrevOrNext,switchView,unfocus}from"./functions.js";function findNextAvailableOne(e,t,i,r,a,o){if(isInRange(e,a,o)){if(r(e)){return findNextAvailableOne(t(e,i),t,i,r,a,o)}return e}}function moveByArrowKey(e,t,i,r){const a=e.picker,o=a.currentView,n=o.step||1;let c,d,s=a.viewDate;switch(o.id){case 0:s=r?addDays(s,7*i):t.ctrlKey||t.metaKey?addYears(s,i):addDays(s,i),c=addDays,d=e=>o.disabled.includes(e);break;case 1:s=addMonths(s,r?4*i:i),c=addMonths,d=e=>{const t=new Date(e),{year:i,disabled:r}=o;return t.getFullYear()===i&&r.includes(t.getMonth())};break;default:s=addYears(s,i*(r?4:1)*n),c=addYears,d=e=>o.disabled.includes(startOfYearPeriod(e,n))}s=findNextAvailableOne(s,c,i<0?-n:n,d,o.minDate,o.maxDate),void 0!==s&&a.changeFocus(s).render()}export function onKeydown(e,t){if("Tab"===t.key)return void unfocus(e);const i=e.picker,{id:r,isMinView:a}=i.currentView;if(i.active)if(e.editMode)switch(t.key){case"Escape":i.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(t.key){case"Escape":i.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)goToPrevOrNext(e,-1);else{if(t.shiftKey)return void e.enterEditMode();moveByArrowKey(e,t,-1,!1)}break;case"ArrowRight":if(t.ctrlKey||t.metaKey)goToPrevOrNext(e,1);else{if(t.shiftKey)return void e.enterEditMode();moveByArrowKey(e,t,1,!1)}break;case"ArrowUp":if(t.ctrlKey||t.metaKey)switchView(e);else{if(t.shiftKey)return void e.enterEditMode();moveByArrowKey(e,t,-1,!0)}break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey)return void e.enterEditMode();moveByArrowKey(e,t,1,!0);break;case"Enter":a?e.setDate(i.viewDate):i.changeView(r-1).render();break;case"Backspace":case"Delete":return void e.enterEditMode();default:return void(1!==t.key.length||t.ctrlKey||t.metaKey||e.enterEditMode())}else switch(t.key){case"ArrowDown":case"Escape":i.show();break;case"Enter":e.update();break;default:return}t.preventDefault(),t.stopPropagation()}export function onFocus(e){e.config.showOnFocus&&!e._showing&&e.show()}export function onMousedown(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=i===document.activeElement,i._clicking=setTimeout((()=>{delete i._active,delete i._clicking}),2e3))}export function onClickInput(e,t){const i=t.target;i._clicking&&(clearTimeout(i._clicking),delete i._clicking,i._active&&e.enterEditMode(),delete i._active,e.config.showOnClick&&e.show())}export function onPaste(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}
//# sourceMappingURL=/sm/3e4ab00afec39ce3c6268be2de40fced0175a0ab25bce287387ca2551d94b98a.map