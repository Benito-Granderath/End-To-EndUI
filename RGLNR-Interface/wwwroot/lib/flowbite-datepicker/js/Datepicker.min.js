/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/flowbite-datepicker@1.3.0/js/Datepicker.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{lastItemOf,stringToArray,isInRange}from"./lib/utils.js";import{today}from"./lib/date.js";import{parseDate,formatDate}from"./lib/date-format.js";import{registerListeners,unregisterListeners}from"./lib/event.js";import{locales}from"./i18n/base-locales.js";import defaultOptions from"./options/defaultOptions.js";import processOptions from"./options/processOptions.js";import Picker from"./picker/Picker.js";import{triggerDatepickerEvent}from"./events/functions.js";import{onKeydown,onFocus,onMousedown,onClickInput,onPaste}from"./events/inputFieldListeners.js";import{onClickOutside}from"./events/otherListeners.js";function stringifyDates(e,t){return e.map((e=>formatDate(e,t.format,t.locale))).join(t.dateDelimiter)}function processInputDates(e,t,i=!1){const{config:s,dates:n,rangepicker:r}=e;if(0===t.length)return i?[]:void 0;const o=r&&e===r.datepickers[1];let a=t.reduce(((e,t)=>{let i=parseDate(t,s.format,s.locale);if(void 0===i)return e;if(s.pickLevel>0){const e=new Date(i);i=1===s.pickLevel?o?e.setMonth(e.getMonth()+1,0):e.setDate(1):o?e.setFullYear(e.getFullYear()+1,0,0):e.setMonth(0,1)}return!isInRange(i,s.minDate,s.maxDate)||e.includes(i)||s.datesDisabled.includes(i)||s.daysOfWeekDisabled.includes(new Date(i).getDay())||e.push(i),e}),[]);return 0!==a.length?(s.multidate&&!i&&(a=a.reduce(((e,t)=>(n.includes(t)||e.push(t),e)),n.filter((e=>!a.includes(e))))),s.maxNumberOfDates&&a.length>s.maxNumberOfDates?a.slice(-1*s.maxNumberOfDates):a):void 0}function refreshUI(e,t=3,i=!0){const{config:s,picker:n,inputField:r}=e;if(2&t){const e=n.active?s.pickLevel:s.startView;n.update().changeView(e).render(i)}1&t&&r&&(r.value=stringifyDates(e.dates,s))}function setDate(e,t,i){let{clear:s,render:n,autohide:r}=i;void 0===n&&(n=!0),n?void 0===r&&(r=e.config.autohide):r=!1;const o=processInputDates(e,t,s);o&&(o.toString()!==e.dates.toString()?(e.dates=o,refreshUI(e,n?3:1),triggerDatepickerEvent(e,"changeDate")):refreshUI(e,1),r&&e.hide())}export default class Datepicker{constructor(e,t={},i=void 0){e.datepicker=this,this.element=e;const s=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:document.body,defaultViewDate:today(),maxDate:void 0,minDate:void 0},processOptions(defaultOptions,this));this._options=t,Object.assign(s,processOptions(t,this));const n=this.inline="INPUT"!==e.tagName;let r,o;if(n)s.container=e,o=stringToArray(e.dataset.date,s.dateDelimiter),delete e.dataset.date;else{const i=t.container?document.querySelector(t.container):null;i&&(s.container=i),r=this.inputField=e,r.classList.add("datepicker-input"),o=stringToArray(r.value,s.dateDelimiter)}if(i){const e=i.inputs.indexOf(r),t=i.datepickers;if(e<0||e>1||!Array.isArray(t))throw Error("Invalid rangepicker object.");t[e]=this,Object.defineProperty(this,"rangepicker",{get:()=>i})}this.dates=[];const a=processInputDates(this,o);a&&a.length>0&&(this.dates=a),r&&(r.value=stringifyDates(this.dates,s));const c=this.picker=new Picker(this);if(n)this.show();else{const e=onClickOutside.bind(null,this),t=[[r,"keydown",onKeydown.bind(null,this)],[r,"focus",onFocus.bind(null,this)],[r,"mousedown",onMousedown.bind(null,this)],[r,"click",onClickInput.bind(null,this)],[r,"paste",onPaste.bind(null,this)],[document,"mousedown",e],[document,"touchstart",e],[window,"resize",c.place.bind(c)]];registerListeners(this,t)}}static formatDate(e,t,i){return formatDate(e,t,i&&locales[i]||locales.en)}static parseDate(e,t,i){return parseDate(e,t,i&&locales[i]||locales.en)}static get locales(){return locales}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=this.picker,i=processOptions(e,this);Object.assign(this._options,e),Object.assign(this.config,i),t.setOptions(i),refreshUI(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),unregisterListeners(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(e=void 0){const t=e?t=>formatDate(t,e,this.config.locale):e=>new Date(e);return this.config.multidate?this.dates.map(t):this.dates.length>0?t(this.dates[0]):void 0}setDate(...e){const t=[...e],i={},s=lastItemOf(e);"object"!=typeof s||Array.isArray(s)||s instanceof Date||!s||Object.assign(i,t.pop());setDate(this,Array.isArray(t[0])?t[0]:t,i)}update(e=void 0){if(this.inline)return;const t={clear:!0,autohide:!(!e||!e.autohide)};setDate(this,stringToArray(this.inputField.value,this.config.dateDelimiter),t)}refresh(e=void 0,t=!1){let i;e&&"string"!=typeof e&&(t=e,e=void 0),i="picker"===e?2:"input"===e?1:3,refreshUI(this,i,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}exitEditMode(e=void 0){if(this.inline||!this.editMode)return;const t=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),t.update&&this.update(t)}}
//# sourceMappingURL=/sm/433ae5fc8bf33dbb70a45478468f36aeab9943e11d7253929365a785fcbc288e.map