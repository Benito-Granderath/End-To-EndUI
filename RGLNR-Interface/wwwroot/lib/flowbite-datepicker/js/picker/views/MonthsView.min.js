/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/flowbite-datepicker@1.3.0/js/picker/views/MonthsView.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{hasProperty,pushUnique,createTagRepeat}from"../../lib/utils.js";import{dateValue}from"../../lib/date.js";import{parseHTML}from"../../lib/dom.js";import View from"./View.js";function computeMonthRange(e,t){if(!e||!e[0]||!e[1])return;const[[a,r],[s,i]]=e;return a>t||s<t?void 0:[a===t?r:-1,s===t?i:12]}export default class MonthsView extends View{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(parseHTML(createTagRepeat("span",12,{"data-month":e=>e})))),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),hasProperty(e,"minDate"))if(void 0===e.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{const t=new Date(e.minDate);this.minYear=t.getFullYear(),this.minMonth=t.getMonth(),this.minDate=t.setDate(1)}if(hasProperty(e,"maxDate"))if(void 0===e.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const t=new Date(e.maxDate);this.maxYear=t.getFullYear(),this.maxMonth=t.getMonth(),this.maxDate=dateValue(this.maxYear,this.maxMonth+1,0)}void 0!==e.beforeShowMonth&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce(((e,t)=>{const a=new Date(t),r=a.getFullYear(),s=a.getMonth();return void 0===e[r]?e[r]=[s]:pushUnique(e[r],s),e}),{}),t&&t.dates&&(this.range=t.dates.map((e=>{const t=new Date(e);return isNaN(t)?void 0:[t.getFullYear(),t.getMonth()]})))}render(){this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const e=this.selected[this.year]||[],t=this.year<this.minYear||this.year>this.maxYear,a=this.year===this.minYear,r=this.year===this.maxYear,s=computeMonthRange(this.range,this.year);Array.from(this.grid.children).forEach(((i,h)=>{const o=i.classList,d=dateValue(this.year,h,1);if(i.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(i.dataset.date=d),i.textContent=this.monthNames[h],(t||a&&h<this.minMonth||r&&h>this.maxMonth)&&o.add("disabled"),s){const[e,t]=s;h>e&&h<t&&o.add("range"),h===e&&o.add("range-start"),h===t&&o.add("range-end")}e.includes(h)&&(o.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),o.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),h===this.focused&&o.add("focused"),this.beforeShow&&this.performBeforeHook(i,h,d)}))}refresh(){const e=this.selected[this.year]||[],[t,a]=computeMonthRange(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((e=>{e.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),e.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")})),Array.from(this.grid.children).forEach(((r,s)=>{const i=r.classList;s>t&&s<a&&i.add("range"),s===t&&i.add("range-start"),s===a&&i.add("range-end"),e.includes(s)&&(i.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),i.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),s===this.focused&&i.add("focused")}))}refreshFocus(){this.grid.querySelectorAll(".focused").forEach((e=>{e.classList.remove("focused")})),this.grid.children[this.focused].classList.add("focused")}}
//# sourceMappingURL=/sm/0c29956c64ac5468c103863b95dfaf41c7f9cb416a13c901b443e45f1db40680.map