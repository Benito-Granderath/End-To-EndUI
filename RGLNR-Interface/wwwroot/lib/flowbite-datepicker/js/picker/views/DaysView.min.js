/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/flowbite-datepicker@1.3.0/js/picker/views/DaysView.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{hasProperty,pushUnique}from"../../lib/utils.js";import{today,dateValue,addDays,addWeeks,dayOfTheWeekOf,getWeek}from"../../lib/date.js";import{formatDate}from"../../lib/date-format.js";import{parseHTML,showElement,hideElement}from"../../lib/dom.js";import daysTemplate from"../templates/daysTemplate.js";import calendarWeeksTemplate from"../templates/calendarWeeksTemplate.js";import View from"./View.js";export default class DaysView extends View{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const e=parseHTML(daysTemplate).firstChild;this.dow=e.firstChild,this.grid=e.lastChild,this.element.appendChild(e)}super.init(e)}setOptions(e){let t;if(hasProperty(e,"minDate")&&(this.minDate=e.minDate),hasProperty(e,"maxDate")&&(this.maxDate=e.maxDate),e.datesDisabled&&(this.datesDisabled=e.datesDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),void 0!==e.todayHighlight&&(this.todayHighlight=e.todayHighlight),void 0!==e.weekStart&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){const a=this.locale=e.locale;this.dayNames=a.daysMin,this.switchLabelFormat=a.titleFormat,t=!0}if(void 0!==e.beforeShowDay&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),void 0!==e.calendarWeeks)if(e.calendarWeeks&&!this.calendarWeeks){const e=parseHTML(calendarWeeksTemplate).firstChild;this.calendarWeeks={element:e,dow:e.firstChild,weeks:e.lastChild},this.element.insertBefore(e,this.element.firstChild)}else this.calendarWeeks&&!e.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);void 0!==e.showDaysOfWeek&&(e.showDaysOfWeek?(showElement(this.dow),this.calendarWeeks&&showElement(this.calendarWeeks.dow)):(hideElement(this.dow),this.calendarWeeks&&hideElement(this.calendarWeeks.dow))),t&&Array.from(this.dow.children).forEach(((e,t)=>{const a=(this.weekStart+t)%7;e.textContent=this.dayNames[a],e.className=this.daysOfWeekDisabled.includes(a)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}))}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),a=e.getMonth(),r=dateValue(t,a,1),d=dayOfTheWeekOf(r,this.weekStart,this.weekStart);this.first=r,this.last=dateValue(t,a+1,0),this.start=d,this.focused=this.picker.viewDate}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?today():void 0,this.disabled=[...this.datesDisabled];const e=formatDate(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(e),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const e=dayOfTheWeekOf(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(((t,a)=>{t.textContent=getWeek(addWeeks(e,a))}))}Array.from(this.grid.children).forEach(((e,t)=>{const a=e.classList,r=addDays(this.start,t),d=new Date(r),s=d.getDay();if(e.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,e.dataset.date=r,e.textContent=d.getDate(),r<this.first?a.add("prev","text-gray-500","dark:text-white"):r>this.last&&a.add("next","text-gray-500","dark:text-white"),this.today===r&&a.add("today","bg-gray-100","dark:bg-gray-600"),(r<this.minDate||r>this.maxDate||this.disabled.includes(r))&&(a.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),a.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),this.daysOfWeekDisabled.includes(s)&&(a.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),a.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),pushUnique(this.disabled,r)),this.daysOfWeekHighlighted.includes(s)&&a.add("highlighted"),this.range){const[e,t]=this.range;r>e&&r<t&&(a.add("range","bg-gray-200","dark:bg-gray-600"),a.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),r===e&&(a.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),a.remove("rounded-lg","rounded-r-lg")),r===t&&(a.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),a.remove("rounded-lg","rounded-l-lg"))}this.selected.includes(r)&&(a.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),a.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),r===this.focused&&a.add("focused"),this.beforeShow&&this.performBeforeHook(e,r,r)}))}refresh(){const[e,t]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((e=>{e.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),e.classList.add("text-gray-900","rounded-lg","dark:text-white")})),Array.from(this.grid.children).forEach((a=>{const r=Number(a.dataset.date),d=a.classList;d.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),r>e&&r<t&&(d.add("range","bg-gray-200","dark:bg-gray-600"),d.remove("rounded-lg")),r===e&&(d.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),d.remove("rounded-lg")),r===t&&(d.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),d.remove("rounded-lg")),this.selected.includes(r)&&(d.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),d.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),r===this.focused&&d.add("focused")}))}refreshFocus(){const e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach((e=>{e.classList.remove("focused")})),this.grid.children[e].classList.add("focused")}}
//# sourceMappingURL=/sm/0e3698b98f7b4215becae65b115f9ead7894112ee3b9a1acaae7bf23cad404ac.map