/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/flowbite-datepicker@1.3.0/js/picker/Picker.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{hasProperty,lastItemOf,isInRange,limitToRange}from"../lib/utils.js";import{today}from"../lib/date.js";import{parseHTML,showElement,hideElement,emptyChildNodes}from"../lib/dom.js";import{registerListeners}from"../lib/event.js";import pickerTemplate from"./templates/pickerTemplate.js";import DaysView from"./views/DaysView.js";import MonthsView from"./views/MonthsView.js";import YearsView from"./views/YearsView.js";import{triggerDatepickerEvent}from"../events/functions.js";import{onClickTodayBtn,onClickClearBtn,onClickViewSwitch,onClickPrevBtn,onClickNextBtn,onClickView,onClickPicker}from"../events/pickerListeners.js";function processPickerOptions(e,t){if(void 0!==t.title&&(t.title?(e.controls.title.textContent=t.title,showElement(e.controls.title)):(e.controls.title.textContent="",hideElement(e.controls.title))),t.prevArrow){const i=e.controls.prevBtn;emptyChildNodes(i),t.prevArrow.forEach((e=>{i.appendChild(e.cloneNode(!0))}))}if(t.nextArrow){const i=e.controls.nextBtn;emptyChildNodes(i),t.nextArrow.forEach((e=>{i.appendChild(e.cloneNode(!0))}))}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),void 0!==t.todayBtn&&(t.todayBtn?showElement(e.controls.todayBtn):hideElement(e.controls.todayBtn)),hasProperty(t,"minDate")||hasProperty(t,"maxDate")){const{minDate:t,maxDate:i}=e.datepicker.config;e.controls.todayBtn.disabled=!isInRange(today(),t,i)}void 0!==t.clearBtn&&(t.clearBtn?showElement(e.controls.clearBtn):hideElement(e.controls.clearBtn))}function computeResetViewDate(e){const{dates:t,config:i}=e,n=t.length>0?lastItemOf(t):i.defaultViewDate;return limitToRange(n,i.minDate,i.maxDate)}function setViewDate(e,t){const i=new Date(e.viewDate),n=new Date(t),{id:r,year:o,first:s,last:c}=e.currentView,l=n.getFullYear();switch(e.viewDate=t,l!==i.getFullYear()&&triggerDatepickerEvent(e.datepicker,"changeYear"),n.getMonth()!==i.getMonth()&&triggerDatepickerEvent(e.datepicker,"changeMonth"),r){case 0:return t<s||t>c;case 1:return l!==o;default:return l<s||l>c}}function getTextDirection(e){return window.getComputedStyle(e).direction}export default class Picker{constructor(e){this.datepicker=e;const t=pickerTemplate.replace(/%buttonClass%/g,e.config.buttonClass),i=this.element=parseHTML(t).firstChild,[n,r,o]=i.firstChild.children,s=n.firstElementChild,[c,l,a]=n.lastElementChild.children,[d,h]=o.firstChild.children,p={title:s,prevBtn:c,viewSwitch:l,nextBtn:a,todayBtn:d,clearBtn:h};this.main=r,this.controls=p;const w=e.inline?"inline":"dropdown";i.classList.add(`datepicker-${w}`),"dropdown"===w&&i.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),processPickerOptions(this,e.config),this.viewDate=computeResetViewDate(e),registerListeners(e,[[i,"click",onClickPicker.bind(null,e),{capture:!0}],[r,"click",onClickView.bind(null,e)],[p.viewSwitch,"click",onClickViewSwitch.bind(null,e)],[p.prevBtn,"click",onClickPrevBtn.bind(null,e)],[p.nextBtn,"click",onClickNextBtn.bind(null,e)],[p.todayBtn,"click",onClickTodayBtn.bind(null,e)],[p.clearBtn,"click",onClickClearBtn.bind(null,e)]]),this.views=[new DaysView(this),new MonthsView(this),new YearsView(this,{id:2,name:"years",cellClass:"year",step:1}),new YearsView(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[e.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),e.config.container.appendChild(this.element)}setOptions(e){processPickerOptions(this,e),this.views.forEach((t=>{t.init(e,!1)})),this.currentView.render()}detach(){this.datepicker.config.container.removeChild(this.element)}show(){if(this.active)return;this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;const e=this.datepicker;if(!e.inline){const t=getTextDirection(e.inputField);t!==getTextDirection(e.config.container)?this.element.dir=t:this.element.dir&&this.element.removeAttribute("dir"),this.place(),e.config.disableTouchKeyboard&&e.inputField.blur()}triggerDatepickerEvent(e,"show")}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,triggerDatepickerEvent(this.datepicker,"hide"))}place(){const{classList:e,style:t}=this.element,{config:i,inputField:n}=this.datepicker,r=i.container,{width:o,height:s}=this.element.getBoundingClientRect(),{left:c,top:l,width:a}=r.getBoundingClientRect(),{left:d,top:h,width:p,height:w}=n.getBoundingClientRect();let m,u,k,{x:g,y:f}=i.orientation;r===document.body?(m=window.scrollY,u=d+window.scrollX,k=h+m):(m=r.scrollTop,u=d-c,k=h-l+m),"auto"===g&&(u<0?(g="left",u=10):g=u+o>a||"rtl"===getTextDirection(n)?"right":"left"),"right"===g&&(u-=o-p),"auto"===f&&(f=k-s<m?"bottom":"top"),"top"===f?k-=s:k+=w,e.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),e.add(`datepicker-orient-${f}`,`datepicker-orient-${g}`),t.top=k?`${k}px`:k,t.left=u?`${u}px`:u}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){const t=this.currentView,i=this.views[e];return i.id!==t.id&&(this.currentView=i,this._renderMethod="render",triggerDatepickerEvent(this.datepicker,"changeView"),this.main.replaceChild(i.element,t.element)),this}changeFocus(e){return this._renderMethod=setViewDate(this,e)?"render":"refreshFocus",this.views.forEach((e=>{e.updateFocus()})),this}update(){const e=computeResetViewDate(this.datepicker);return this._renderMethod=setViewDate(this,e)?"render":"refresh",this.views.forEach((e=>{e.updateFocus(),e.updateSelection()})),this}render(e=!0){const t=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[t]()}}
//# sourceMappingURL=/sm/7316eb80ad0b887101056e1a7b619ab2b2e57ca17a27d07eff2a6ca87af66890.map